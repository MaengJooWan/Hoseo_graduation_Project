<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
          integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <script src="http://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
            integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
            integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
            crossorigin="anonymous"></script>

    <!-- Bootstrap CSS -->
    <title><%=title%></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <style>
        html, body {
            position: relative;
            height: 100%;
            font-family: 나눔바른고딕;
            background-color: white;
        }

        body {
            font-family: 나눔바른고딕;
            font-size: 14px;
            color: #000;
            margin: 0;
            padding: 0;
        }

        .dropdown-menu a:hover {
            background-color: lightgray;
        }

        .swiper-container {
            width: 100%;
            height: 60%;
            background-color: #c6edd1;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #c6edd1;
            /* Center slide text vertically */
            display: -webkit-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            -webkit-align-items: center;
            align-items: center;
        }

        th {
            text-align: center;
            color: #34a853;
        }

        tr {
            text-align: center;
            color: #34a853;
        }

        a {
            text-decoration: none;
        }

        .container-fluid {
            padding: 40px 30px;
        }

        .myChart {
            vertical-align: middle;
            width: 100%;
            margin: 0 auto;
            position: relative;
            display: inline-block;

        }

        p {
            text-align: center;
            font-family: 'Verdana', sans-serif;
            font-size: 10px;
        }

        canvas {
            height: 100%;
        }

        p {
            color: #34a853;
            font-family: 나눔바른고딕;
        }

        h1 {
            color: #34a853;
            font-family: 나눔바른고딕;
        }

        h2 {
            color: #34a853;
            font-family: 나눔바른고딕;
        }

        h3 {
            color: #34a853;
            font-family: 나눔바른고딕;
        }

        h4 {
            color: #34a853;
            font-family: 나눔바른고딕;
        }

        @media screen and (max-width: 768px) {
            .col-sm-4 {
                text-align: center;
                margin: 25px 0;
            }
        }
    </style>
</head>

<body>
<!--위에는 헤더레이아웃-->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" style="background-color: #34a853; margin-bottom: 0px">
    <a class="navbar-brand" href="/"><span style="color: white">Smart ERP</span></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
            style="background-color: white">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" style="color: white" href="#" id="navbardrop"
                   data-toggle="dropdown">
                    상품관리
                </a>
                <% if(user != undefined){ %>
                    <div class="dropdown-menu" style="background-color: white;">
                        <a class="dropdown-item" style="color: #34a853" href="/recive_management">입고목록</a>
                        <a class="dropdown-item" style="color: #34a853" href="/forward_management">출고목록</a>
                        <a class="dropdown-item" style="color: #34a853" href="/faulty_registration">불량목록</a>
                        <!--관리자일 경우에 발주 대기/승인 뜨기-->
                        <% if(user.Authority == 0){ %>
                            <a class="dropdown-item" style="color: #34a853" href="/order_registration">신규물품등록</a>
                        <% } %>
                    </div>
                <% } %>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" style="color: white" href="#" id="navbardrop"
                   data-toggle="dropdown">
                    스마트관리
                </a>
                <% if(user != undefined){ %>
                    <div class="dropdown-menu" style="background-color: white;">
                        <a class="dropdown-item" style="color: #34a853" href="/product_recommendation_list">제품추천목록</a>
                    </div>
                <% } %>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" style="color: white" href="#" id="navbardrop"
                   data-toggle="dropdown">
                    인사관리
                </a>
                <% if(user != undefined){ %>
                    <div class="dropdown-menu" style="background-color: white;">
                        <a class="dropdown-item" style="color: #34a853" href="/personnel_information">인사정보</a>
                        <!--관리자일 경우에 회원 가입 승인 뜨기-->
                            <% if(user.Authority == 0){ %>
                                <a class="dropdown-item" style="color: #34a853" href="/approval_of_subscription">가입승인</a>
                            <% } %>
                    </div>
                <% } %>
                
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" style="color: white" href="#" id="navbardrop"
                   data-toggle="dropdown">
                    조회관리
                </a>
                <% if(user != undefined){ %>
                    <div class="dropdown-menu" style="background-color: white;">
                        <a class="dropdown-item" style="color: #34a853" href="/board">공지사항</a>
                        <a class="dropdown-item" style="color: #34a853" href="/receiving_quantity_graph">입고량조회</a>
                        <a class="dropdown-item" style="color: #34a853" href="/forwarding_quantity_graph">출고량조회</a>
                        <a class="dropdown-item" style="color: #34a853" href="/inventory_inquiry">재고량조회</a>
                    </div>
                <% } %>
            </li>
        </ul>

        <form class="form-inline my-2 my-lg-0">
            <!--만약 쿼리에서 가지고 온 값이 없을 경우에 로그인 버튼 뜨고 아닐 경우에는 로그아웃과 회원정보 변경 뜸-->
            <% if(user == undefined && loginErrorsize == 0){ %>
                <button type="button" class="btn btn-outline-light" style="margin-left: 5px" data-toggle="modal"
                        data-target="#myModal">
                    로그인
                </button>
            <% } else if(user == undefined && loginErrorsize >= 1){ %>
                <script language="javascript">
                    var test = "<%= loginError %>";
                    alert(test);
                </script>
                <button type="button" class="btn btn-outline-light" style="margin-left: 5px" data-toggle="modal" data-target="#myModal">
                    로그인
                </button>
            <% } else { %>
                <span class="float-right"
                style="color: white; margin-left: 10px; margin-right: 10px"><%= user.Name %>님 </span>
                <a href="/auth/logout" class="float-right" style="color: white; margin-left: 5px; margin-right: 5px">로그아웃</a>
                <a href="/userchange" class="float-right" style="color: white; margin-left: 5px; margin-right: 5px">회원정보 변경</a>
            <% } %>
        </form>
    </div>
</nav>
<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">로그인</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <form action="/auth/login" accept-charset="utf-8" name="login" method="post">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <p style="width: 120px" class="input-group-text mx-auto d-block">아이디</p>
                        </div>
                        <input type="email" name="email" class="form-control" placeholder="">
                    </div>
                    <div class="input-group" style="margin-top: 5px;">
                        <div class="input-group-prepend">
                            <p style="width: 120px;" class="input-group-text mx-auto d-block">비밀번호</p>
                        </div>
                        <input type="password" name="password" class="form-control" placeholder="">
                    </div>
                    <button type="submit" class="btn btn-success float-right" style="margin-top: 5px">로그인</button>
                </form>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <div class="col-sm-12" style="margin-top: 5px; float: right">
                    <input type="button" class="btn btn-outline-success" onclick='idsearch()' data-dismiss="modal"
                    style="margin-right: 5px; float: right" value="아이디 찾기"/>
                    <input type="button" class="btn btn-outline-success" onclick='pwsearch()' data-dismiss="modal"
                    style="margin-right: 5px; float: right" value="비밀번호 찾기"/>
                    <input type="button" class="btn btn-outline-success" onclick='join()' data-dismiss="modal"
                        style="margin-right: 5px; float: right" value="회원가입"/>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    //버튼클릭시 javascript 호출합니다.
    function join(){
    //팝업창에서 부모창을 다른페이지로 이동.
        window.location.href="/join";
    }
    function idsearch(){
        window.location.href="/idsearch";
    }

    function pwsearch(){
        window.location.href="/pwsearch";
    }
</script>