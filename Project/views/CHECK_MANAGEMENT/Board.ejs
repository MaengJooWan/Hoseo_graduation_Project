<style>
    .board{
        margin-left: 1.5em;
        margin-right: 1.5em;
    }
</style>

<!doctype html>
<html lang="en">
<div class="card" style="padding-top: 60px; color: white">
    <div class="card-header mx-auto d-block" style="background: #40c463; font-size: 30px; width: 100%;">
        <span class="spinner-grow spinner-grow mx-auto d-block" style="float: left"></span>
        <span class="mx-auto d-block" style="float: left">공지사항</span>
    </div>
</div>

<div class="container" style="margin-top: 20px">
    <div class="col-sm-12 mx-auto d-block" style="float: left; margin: 10px">
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="row">
                <div class="col-sm-3">
                    <div class="form-group">
                        <input type="text" name="research" class="form-control" id="research" placeholder="">
                    </div>
                </div>
                <div class="col-lg-3">
                    <button class="btn btn-success" style="margin-left: 3px" type="button" onclick="search()">검색</button>
                </div>
            </div>
        </div>
    </div>
    <div class="board">
        <div class="row">
            <table id="recive-table" class="table table-borderless table-hover" style="border-top: 1px solid #c6edd1; table-layout: fixed">
                <thead style="background-color:#40c463;">
                    <tr>
                        <th style="color: #ffffff; border-radius: 10px 0 0 10px;">번호</th>
                        <th style="color: #ffffff;">제목</th>
                        <th style="color: #ffffff;">날짜</th>
                        <th style="color: #ffffff;">게시자</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 페이지 카운트하여 가지고 오는 것 -->
                    <% for(var i = (page_num - 1) * 10; i < page_num * 10; i++){ %>
                        <% if (rv[i] == undefined) continue;%>
                            <tr style="cursor: pointer" onclick="location.href='/board/view/<%= rv[i].id %>'">
                                <td style=" width:20%; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; border-bottom: 1px solid #c0c0c0;"><%= rv[i].id %></a></td>
                                <td style=" width:20%; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; border-bottom: 1px solid #c0c0c0;"><%= rv[i].Title %></td>
                                <td style=" width:50%; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; border-bottom: 1px solid #c0c0c0;"><%= rv[i].Date %></td>
                                <td style=" width:20%; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; border-bottom: 1px solid #c0c0c0;"><%= rv[i].user.Name %></td>
                            </tr>
                    <% } %>
                </tbody>
            </table>
        </tbody>

        <!-- 페이지 Index 계산해서 띄우는 부분 -->
        <!-- 가운데 정렬이 안 되오니 가운데 정렬 수정 바람 -->
        <h4 style="text-align: center">
            <%for(var i = 0; i <=  rv.length / 10; i++){%>
                <a href="/board/<%= i + 1%>"><%= i + 1%> </a>
            <%}%>
        </h4>
    </div>

</div>

<% if (user.Authority == 0) { %>
    <a href="/board/write"><button class="btn btn-success" style="float: right;">글쓰기</button></a>
<% } %>
</div>

<script>
    function search(){
        //검색
        var Search = $('#research').val();

        if(Search == ""){
            alert('검색명을 입력해주세요');
            return false;
        }else{
            $.ajax({
                url: '/board/search_result',
                async: true,
                type: 'POST',
                data: {
                    Search: Search,
                },
                dataType: 'json',
            })
            window.location.href='/board';
        }
    }


</script>
<%include ../include/footer.ejs%>
<%include ../include/header.ejs%>