<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href='http://127.0.0.1:3000/nodeModule/@fullcalendar/core/main.css' rel='stylesheet'/>
<link href='http://127.0.0.1:3000/nodeModule/chart.js/dist/Chart.css' rel='stylesheet'/>
<link href='http://127.0.0.1:3000/nodeModule/@fullcalendar/daygrid/main.css' rel='stylesheet'/>
<link rel="stylesheet" href="http://127.0.0.1:3000/nodeModule/swiper/dist/css/swiper.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
        integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<script src='http://127.0.0.1:3000/nodeModule/chart.js/dist/Chart.js'></script>
<script src='http://127.0.0.1:3000/nodeModule/@fullcalendar/core/main.js'></script>
<script src='http://127.0.0.1:3000/nodeModule/@fullcalendar/daygrid/main.js'></script>
<script src="http://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
<script src="http://127.0.0.1:3000/nodeModule/swiper/dist/js/swiper.min.js"></script>

<style>
    .menu{
        margin-top: 2em;
        text-indent: 2em;
    }
    .bt{
        margin-top: 4em;
        float: right;
        margin-inline-end: 27em;
        text-indent: 2em;
    }
    .menuend{
        margin-top: 2em;
        text-indent: 2em;
        margin-bottom: 20em;
    }
    .btend{
        margin-top: 4em;
        float: right;
        margin-inline-end: 27em;
        text-indent: 2em;
        margin-bottom: 20em;
    }
</style>
<!doctype html>
<html lang="en">
<div class="card" style="padding-top: 50px; color: white">
    <div class="card-header mx-auto d-block" style="background: #40c463; font-size: 30px; width: 100%;">
        <span class="spinner-grow spinner-grow mx-auto d-block" style="float: left;"></span>
        <span class="mx-auto d-block" style="float: left">ID 찾기</span>
    </div>
</div>

<div class="menu">
    <div class="row">
        <label for="username" class="col-sm-2 control label" style="font-size: 20px;" >이름</label>
        <div class="col-sm-6">
            <input class="form-control" id="id_findName" placeholder="" onblur=''>
        </div>
    </div>
</div>


<div class="menu">
    <div class="row">
        <label for="username" class="col-sm-2 control label" style="font-size: 20px;">사원번호</label>
        <div class="col-sm-6">
            <input class="form-control" id="id_findEmployeeNum" placeholder="" onblur=''>
        </div>
    </div>
    <div class="btend">
        <button type="button" class="btn btn-success" onclick="idsearchResult()">아이디찾기</button>
    </div>
</div>

<script>
    //버튼클릭시 idserchresult창 출력
    function idsearchResult(){
        //둘 중 한개만 존재할 시 
        //alert("이름과 핸드폰 번호가 일치하지 않습니다. 다시 확인해주세요.")

        var Name = $('#id_findName').val();
        var EmployeeNum = $('#id_findEmployeeNum').val();

        if(Name == "" || EmployeeNum == ""){
            alert('빈칸을 채워주세요.');
            return false;
        }else{
            $.ajax({
                url: '/auth/idsearch',
                async: true,
                type: 'POST',
                data: {
                    Name: Name,
                    EmployeeNum: EmployeeNum,
                },
                dataType: 'json',

                success: function(data) {
                    //서버에서 메시지를 받아서 출력
                    alert(data['ok']);

                    //만약 ID가 존재하면은 메인으로 돌아가기
                    if(data['value'] == 0){
                        window.location.href='/';
                    }
                }
            })
        }
    }
</script>

<%include include/footer.ejs%>
<%include include/header.ejs%>