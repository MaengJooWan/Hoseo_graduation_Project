<!doctype html>
<html lang="en">

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href='http://127.0.0.1:3000/nodeModule/@fullcalendar/core/main.css' rel='stylesheet'/>
<link href='http://127.0.0.1:3000/nodeModule/chart.js/dist/Chart.css' rel='stylesheet'/>
<link href='http://127.0.0.1:3000/nodeModule/@fullcalendar/daygrid/main.css' rel='stylesheet'/>
<link rel="stylesheet" href="http://127.0.0.1:3000/nodeModule/swiper/dist/css/swiper.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
        integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<script src='http://127.0.0.1:3000/nodeModule/chart.js/dist/Chart.js'></script>
<script src='http://127.0.0.1:3000/nodeModule/@fullcalendar/core/main.js'></script>
<script src='http://127.0.0.1:3000/nodeModule/@fullcalendar/daygrid/main.js'></script>
<script src="http://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
<script src="http://127.0.0.1:3000/nodeModule/swiper/dist/js/swiper.min.js"></script>


<div class="swiper-container" style="padding-top: 55px;">
    <span class="mx-auto d-block"
          style="color: #34a853; text-align: center; font-size: 25px; margin-top: 5px">추천 제품</span>
    <div class="swiper-wrapper">
        <% for (var i = 0; i < 4; i++) { %>
            <% if (trainingValue.length == 0) {%>
                <% break %>
            <% } else { %>
                <div class="swiper-slide">
                    <script>
                        alert(trainingValue.length);    
                    </script>
                    <img src="http://127.0.0.1:3000/static/<%=trainingValue[i].stationery.Link %>" width="20%">
                    <span style="color: #34a853; margin-left: 50px">제품: <%= trainingValue[i].stationery.Name %> <br><br>수량 : <%= trainingValue[i].Count %> 개 <br></span>
                </div>
            <% } %>
        <% } %>
    </div>
    <!-- Add Pagination -->
    <div class="swiper-pagination"></div>
    <!-- Add Arrows -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
</div>

<button type="button" class="btn btn-success btn-block" disabled style="margin-top: 10px; color: white"><span
            class="spinner-grow spinner-grow-sm"></span> 공지사항 & 달력
</button>


<div class="row">
    <div class="col-sm-6" style="background-color: white; padding: 40px">
        <div class="row">
            <div class="col-sm-6">           
                <h3>공지사항</h3>
            </div>
            <div class="col-sm-6">
                <button type="button" class="btn btn-success" style="float: right;" onclick="board_next()"><span style="color: white">더보기</span></a></button>
            </div>
        </div>
        <table class="table table-hover mx-auto">
            <thead>
            <tr>
                <th>ID</th>
                <th>제목</th>
                <th>작성자</th>
                <th>작성일</th>
            </tr>
            </thead>
                <tbody>
                    <!-- 페이지 카운트하여 가지고 오는 것 -->
                    <% for(var i = 0; i < noticeValue.length; i++){ %>
                        <tr style="cursor: pointer" onclick="location.href='/board/view/<%= noticeValue[i].id %>'">
                            <td style=" width:20%; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; border-bottom: 1px solid #c0c0c0;"><%= noticeValue[i].id %></a></td>
                            <td style=" width:20%; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; border-bottom: 1px solid #c0c0c0;"><%= noticeValue[i].Title %></td>
                            <td style=" width:50%; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; border-bottom: 1px solid #c0c0c0;"><%= noticeValue[i].Date %></td>
                            <td style=" width:20%; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; border-bottom: 1px solid #c0c0c0;"><%= noticeValue[i].user.Name %></td>
                        </tr>
                    <% } %>
                </tbody>
        </table>
    </div>
    <div class="col-sm-6" style="padding: 40px; background-color: white;">
        <div id="calendar">
        </div>
    </div>
</div>
<button type="button" class="btn btn-success btn-block" disabled style="margin-top: 10px; color: white">
    <span class="spinner-grow spinner-grow-sm"></span>금일 물품 입 출고 현황
</button>

<div class="col-sm-12" style="float: left; margin-top: 10px; margin-bottom: 10px; text-align: center; color: black">
<% for (var i = 0; i < productsValue.length; i++) { %>
    <div id="card_<%= i %>" class="card"
            style="width:300px; float: left; margin-top : 10px; margin-bottom: 10px; margin-left: 90px; margin-right: 65px; ">
        <div class="card-header" style="background-color: #a8e4b8"> <%= productsValue[i].Name %> <span class="badge badge-success">Update</span>
        </div>
        <div class="card-body"><img class="card-img-top" src="http://127.0.0.1:3000/static/<%=productsValue[i].Link %>"
                                    alt="Card image" height="200px" style="padding: 5px"></div>
        <div class="card-footer" style="background-color: #a8e4b8">
            <%for (var j = 0; j <= inputValue.length; j++) { %>
                <% if(j >= inputValue.length) { %>
                    <span id="o_out" style="color: black"> 입고 : 0 <br></span>
                    <% break %>
                <% }%>

                <% if (productsValue[i].id == inputValue[j].stationery.id) { %>
                    <span id="o_in" style="color: black"> 입고 : <%=inputValue[j].Count %> <br></span>
                    <% break %>
                <% }%>
            <% }%>

            <%for (var j = 0; j <= outputValue.length; j++) { %>
                <% if(j >= outputValue.length) { %>
                    <span id="o_out" style="color: black"> 출고 : 0 <br></span>
                    <% break %>
                <% }%>
                <% if (productsValue[i].id == outputValue[j].stationery.id) { %>
                    <span id="o_out" style="color: black"> 출고 : <%=outputValue[j].Count %> <br></span>
                    <% break %>
                <% }%>
            <% }%> 
        </div>
    </div>
<% } %>
</div>



<script>
    var fritus;

    var swiper = new Swiper('.swiper-container', {
        spaceBetween: 30,
        centeredSlides: true,
        autoplay: {
            delay: 2500,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        observer: true, 
        observeParents: true,
        loop: true,
        centeredSlides: true,
    });

    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            plugins: ['dayGrid']
        });

        calendar.render();
    });


    function board_next(){
        window.location.href='/board';
    }
</script>
</div>
</body>
</html>

<%include include/footer.ejs%>
<%include include/header.ejs%>